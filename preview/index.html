<!DOCTYPE html>
<html>
  <body>
    <textarea></textarea>
    <script type="module">
      import { fcitxReady } from "./index.js"
      await fcitxReady
      const textarea = document.querySelector('textarea')
      let focus = false
      textarea.addEventListener('focus', () => {
        focus = true
        Module.ccall('focus_in', 'void', [], [])
      })
      textarea.addEventListener('blur', () => {
        focus = false
        Module.ccall('focus_out', 'void', [], [])
      })
      textarea.addEventListener('keydown', fcitx.keyEvent)
      textarea.addEventListener('keyup', fcitx.keyEvent)
    </script>
  </body>
</html>
